<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#000000">
  <title>Food Tracker</title>
  <link rel="manifest" href="manifest.json">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { margin: 0; background: #000; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    .alert { position: fixed; top: 20px; left: 20px; right: 20px; z-index: 100; padding: 16px; border-radius: 16px; animation: slideDown 0.3s ease; }
    @keyframes slideDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const mealIcons = { breakfast: '‚òï', lunch: '‚òÄÔ∏è', dinner: 'üåô', snack: 'üçé' };
    const mealNames = { breakfast: '–°–Ω—ñ–¥–∞–Ω–æ–∫', lunch: '–û–±—ñ–¥', dinner: '–í–µ—á–µ—Ä—è', snack: '–ü–µ—Ä–µ–∫—É—Å' };

    // countable: true = –º–æ–∂–Ω–∞ —Ä–∞—Ö—É–≤–∞—Ç–∏ —à—Ç—É–∫–∞–º–∏, avgWeight = —Å–µ—Ä–µ–¥–Ω—è –≤–∞–≥–∞ –æ–¥–Ω—ñ—î—ó —à—Ç—É–∫–∏
    const defaultFoods = [
      { name: '–ö—É—Ä—è—á–∞ –≥—Ä—É–¥–∫–∞', icon: 'üçó', cal: 165, protein: 31, fat: 3.6, carbs: 0, animP: 31, plantP: 0, satFat: 1, wordsunFat: 2.6, slowCarbs: 0, fastCarbs: 0 },
      { name: '–ö—É—Ä—è—á–µ —Å—Ç–µ–≥–Ω–æ', icon: 'üçó', cal: 209, protein: 26, fat: 11, carbs: 0, animP: 26, plantP: 0, satFat: 3, wordsunFat: 8, slowCarbs: 0, fastCarbs: 0 },
      { name: '–Ø–π—Ü–µ –≤–∞—Ä–µ–Ω–µ', icon: 'ü•ö', cal: 155, protein: 13, fat: 11, carbs: 1.1, animP: 13, plantP: 0, satFat: 3.3, wordsunFat: 7.7, slowCarbs: 0, fastCarbs: 1.1, countable: true, avgWeight: 60 },
      { name: '–Ø–π—Ü–µ —Å–º–∞–∂–µ–Ω–µ', icon: 'üç≥', cal: 196, protein: 14, fat: 15, carbs: 1, animP: 14, plantP: 0, satFat: 4, wordsunFat: 11, slowCarbs: 0, fastCarbs: 1, countable: true, avgWeight: 60 },
      { name: '–û–º–ª–µ—Ç', icon: 'üç≥', cal: 154, protein: 11, fat: 12, carbs: 0.7, animP: 11, plantP: 0, satFat: 3.5, wordsunFat: 8.5, slowCarbs: 0, fastCarbs: 0.7, countable: true, avgWeight: 120 },
      { name: '–†–∏—Å –±—ñ–ª–∏–π —Å—É—Ö–∏–π', icon: 'üçö', cal: 344, protein: 6.7, fat: 0.7, carbs: 79, animP: 0, plantP: 6.7, satFat: 0.2, wordsunFat: 0.5, slowCarbs: 75, fastCarbs: 4 },
      { name: '–†–∏—Å –±—É—Ä–∏–π —Å—É—Ö–∏–π', icon: 'üçö', cal: 337, protein: 7.5, fat: 2.7, carbs: 72, animP: 0, plantP: 7.5, satFat: 0.5, wordsunFat: 2.2, slowCarbs: 70, fastCarbs: 2 },
      { name: '–ì—Ä–µ—á–∫–∞ —Å—É—Ö–∞', icon: 'ü´ò', cal: 343, protein: 13.3, fat: 3.4, carbs: 68, animP: 0, plantP: 13.3, satFat: 0.7, wordsunFat: 2.7, slowCarbs: 65, fastCarbs: 3 },
      { name: '–û–≤—Å—è–Ω–∫–∞ —Å—É—Ö–∞', icon: 'ü•£', cal: 352, protein: 12.3, fat: 6.1, carbs: 60, animP: 0, plantP: 12.3, satFat: 1.1, wordsunFat: 5, slowCarbs: 54, fastCarbs: 6 },
      { name: '–ë–∞–Ω–∞–Ω', icon: 'üçå', cal: 89, protein: 1.1, fat: 0.3, carbs: 23, animP: 0, plantP: 1.1, satFat: 0.1, wordsunFat: 0.2, slowCarbs: 5, fastCarbs: 18, countable: true, avgWeight: 120 },
      { name: '–Ø–±–ª—É–∫–æ', icon: 'üçé', cal: 52, protein: 0.3, fat: 0.2, carbs: 14, animP: 0, plantP: 0.3, satFat: 0, wordsunFat: 0.2, slowCarbs: 4, fastCarbs: 10, countable: true, avgWeight: 180 },
      { name: '–ê–ø–µ–ª—å—Å–∏–Ω', icon: 'üçä', cal: 43, protein: 0.9, fat: 0.1, carbs: 9, animP: 0, plantP: 0.9, satFat: 0, wordsunFat: 0.1, slowCarbs: 2, fastCarbs: 7, countable: true, avgWeight: 150 },
      { name: '–ê–≤–æ–∫–∞–¥–æ', icon: 'ü•ë', cal: 160, protein: 2, fat: 15, carbs: 9, animP: 0, plantP: 2, satFat: 2.1, wordsunFat: 12.9, slowCarbs: 7, fastCarbs: 2, countable: true, avgWeight: 150 },
      { name: '–°–∏—Ä —Ç–≤–µ—Ä–¥–∏–π', icon: 'üßÄ', cal: 402, protein: 25, fat: 33, carbs: 1.3, animP: 25, plantP: 0, satFat: 21, wordsunFat: 12, slowCarbs: 0, fastCarbs: 1.3 },
      { name: '–°–∏—Ä –∫–∏—Å–ª–æ–º–æ–ª–æ—á–Ω–∏–π 5%', icon: 'ü•õ', cal: 121, protein: 17, fat: 5, carbs: 1.8, animP: 17, plantP: 0, satFat: 3, wordsunFat: 2, slowCarbs: 0, fastCarbs: 1.8 },
      { name: '–°–∏—Ä –∫–∏—Å–ª–æ–º–æ–ª–æ—á–Ω–∏–π 0%', icon: 'ü•õ', cal: 71, protein: 18, fat: 0.1, carbs: 1.8, animP: 18, plantP: 0, satFat: 0, wordsunFat: 0.1, slowCarbs: 0, fastCarbs: 1.8 },
      { name: '–ú–æ–ª–æ–∫–æ 2.5%', icon: 'ü•õ', cal: 52, protein: 2.8, fat: 2.5, carbs: 4.7, animP: 2.8, plantP: 0, satFat: 1.6, wordsunFat: 0.9, slowCarbs: 0, fastCarbs: 4.7 },
      { name: '–ô–æ–≥—É—Ä—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∏–π', icon: 'ü•õ', cal: 59, protein: 10, fat: 0.7, carbs: 3.6, animP: 10, plantP: 0, satFat: 0.4, wordsunFat: 0.3, slowCarbs: 0, fastCarbs: 3.6, countable: true, avgWeight: 150 },
      { name: '–ö–µ—Ñ—ñ—Ä 1%', icon: 'ü•õ', cal: 40, protein: 3, fat: 1, carbs: 4, animP: 3, plantP: 0, satFat: 0.6, wordsunFat: 0.4, slowCarbs: 0, fastCarbs: 4 },
      { name: '–•–ª—ñ–± –±—ñ–ª–∏–π', icon: 'üçû', cal: 265, protein: 9, fat: 3.2, carbs: 49, animP: 0, plantP: 9, satFat: 0.7, wordsunFat: 2.5, slowCarbs: 20, fastCarbs: 29, countable: true, avgWeight: 30 },
      { name: '–•–ª—ñ–± —á–æ—Ä–Ω–∏–π', icon: 'üçû', cal: 201, protein: 6.6, fat: 1.2, carbs: 40, animP: 0, plantP: 6.6, satFat: 0.3, wordsunFat: 0.9, slowCarbs: 35, fastCarbs: 5, countable: true, avgWeight: 30 },
      { name: '–ú–∞–∫–∞—Ä–æ–Ω–∏ —Å—É—Ö—ñ', icon: 'üçù', cal: 350, protein: 12, fat: 1.8, carbs: 72, animP: 0, plantP: 12, satFat: 0.3, wordsunFat: 1.5, slowCarbs: 68, fastCarbs: 4 },
      { name: '–Ø–ª–æ–≤–∏—á–∏–Ω–∞', icon: 'ü•©', cal: 250, protein: 26, fat: 15, carbs: 0, animP: 26, plantP: 0, satFat: 6, wordsunFat: 9, slowCarbs: 0, fastCarbs: 0 },
      { name: '–°–≤–∏–Ω–∏–Ω–∞', icon: 'ü•©', cal: 242, protein: 17, fat: 19, carbs: 0, animP: 17, plantP: 0, satFat: 7, wordsunFat: 12, slowCarbs: 0, fastCarbs: 0 },
      { name: '–Ü–Ω–¥–∏—á–∫–∞ —Ñ—ñ–ª–µ', icon: 'üçó', cal: 104, protein: 24, fat: 1, carbs: 0, animP: 24, plantP: 0, satFat: 0.3, wordsunFat: 0.7, slowCarbs: 0, fastCarbs: 0 },
      { name: '–õ–æ—Å–æ—Å—å', icon: 'üêü', cal: 208, protein: 20, fat: 13, carbs: 0, animP: 20, plantP: 0, satFat: 3, wordsunFat: 10, slowCarbs: 0, fastCarbs: 0 },
      { name: '–¢—É–Ω–µ—Ü—å', icon: 'üêü', cal: 132, protein: 29, fat: 1, carbs: 0, animP: 29, plantP: 0, satFat: 0.2, wordsunFat: 0.8, slowCarbs: 0, fastCarbs: 0 },
      { name: '–ö—Ä–µ–≤–µ—Ç–∫–∏', icon: 'ü¶ê', cal: 99, protein: 24, fat: 0.3, carbs: 0.2, animP: 24, plantP: 0, satFat: 0.1, wordsunFat: 0.2, slowCarbs: 0, fastCarbs: 0.2 },
      { name: '–ö–∞—Ä—Ç–æ–ø–ª—è –≤–∞—Ä–µ–Ω–∞', icon: 'ü•î', cal: 82, protein: 2, fat: 0.1, carbs: 17, animP: 0, plantP: 2, satFat: 0, wordsunFat: 0.1, slowCarbs: 15, fastCarbs: 2 },
      { name: '–û–≥—ñ—Ä–æ–∫', icon: 'ü•í', cal: 15, protein: 0.7, fat: 0.1, carbs: 3.6, animP: 0, plantP: 0.7, satFat: 0, wordsunFat: 0.1, slowCarbs: 2, fastCarbs: 1.6, countable: true, avgWeight: 100 },
      { name: '–ü–æ–º—ñ–¥–æ—Ä', icon: 'üçÖ', cal: 18, protein: 0.9, fat: 0.2, carbs: 3.9, animP: 0, plantP: 0.9, satFat: 0, wordsunFat: 0.2, slowCarbs: 1, fastCarbs: 2.9, countable: true, avgWeight: 120 },
      { name: '–ë—Ä–æ–∫–æ–ª—ñ', icon: 'ü•¶', cal: 34, protein: 2.8, fat: 0.4, carbs: 7, animP: 0, plantP: 2.8, satFat: 0.1, wordsunFat: 0.3, slowCarbs: 5, fastCarbs: 2 },
      { name: '–ì—Ä–∏–±–∏ —à–∞–º–ø—ñ–Ω—å–π–æ–Ω–∏', icon: 'üçÑ', cal: 22, protein: 3.1, fat: 0.3, carbs: 3.3, animP: 0, plantP: 3.1, satFat: 0, wordsunFat: 0.3, slowCarbs: 2, fastCarbs: 1.3 },
      { name: '–û–ª—ñ—è —Å–æ–Ω—è—à–Ω–∏–∫–æ–≤–∞', icon: 'ü´í', cal: 884, protein: 0, fat: 100, carbs: 0, animP: 0, plantP: 0, satFat: 10, wordsunFat: 90, slowCarbs: 0, fastCarbs: 0 },
      { name: '–û–ª—ñ—è –æ–ª–∏–≤–∫–æ–≤–∞', icon: 'ü´í', cal: 884, protein: 0, fat: 100, carbs: 0, animP: 0, plantP: 0, satFat: 14, wordsunFat: 86, slowCarbs: 0, fastCarbs: 0 },
      { name: '–í–µ—Ä—à–∫–æ–≤–µ –º–∞—Å–ª–æ', icon: 'üßà', cal: 717, protein: 0.9, fat: 81, carbs: 0.1, animP: 0.9, plantP: 0, satFat: 51, wordsunFat: 30, slowCarbs: 0, fastCarbs: 0.1 },
      { name: '–ú–µ–¥', icon: 'üçØ', cal: 304, protein: 0.3, fat: 0, carbs: 82, animP: 0, plantP: 0.3, satFat: 0, wordsunFat: 0, slowCarbs: 5, fastCarbs: 77 },
      { name: '–®–æ–∫–æ–ª–∞–¥ —á–æ—Ä–Ω–∏–π', icon: 'üç´', cal: 546, protein: 5, fat: 31, carbs: 60, animP: 0, plantP: 5, satFat: 19, wordsunFat: 12, slowCarbs: 10, fastCarbs: 50 },
      { name: '–ì–æ—Ä—ñ—Ö–∏ –≤–æ–ª–æ—Å—å–∫—ñ', icon: 'ü•ú', cal: 654, protein: 15, fat: 65, carbs: 14, animP: 0, plantP: 15, satFat: 6, wordsunFat: 59, slowCarbs: 7, fastCarbs: 7 },
      { name: '–ú–∏–≥–¥–∞–ª—å', icon: 'ü•ú', cal: 579, protein: 21, fat: 50, carbs: 22, animP: 0, plantP: 21, satFat: 4, wordsunFat: 46, slowCarbs: 12, fastCarbs: 10 },
      { name: '–ü—Ä–æ—Ç–µ—ó–Ω —Å–∏—Ä–æ–≤–∞—Ç–∫–æ–≤–∏–π', icon: 'ü•§', cal: 352, protein: 80, fat: 3, carbs: 8, animP: 80, plantP: 0, satFat: 1.5, wordsunFat: 1.5, slowCarbs: 2, fastCarbs: 6, countable: true, avgWeight: 30 },
      { name: '–ö–≤–∞—Å–æ–ª—è —Å—É—Ö–∞', icon: 'ü´ò', cal: 333, protein: 21, fat: 1.2, carbs: 60, animP: 0, plantP: 21, satFat: 0.2, wordsunFat: 1, slowCarbs: 55, fastCarbs: 5 },
      { name: '–°–æ—á–µ–≤–∏—Ü—è —Å—É—Ö–∞', icon: 'ü´ò', cal: 352, protein: 24, fat: 1.1, carbs: 60, animP: 0, plantP: 24, satFat: 0.2, wordsunFat: 0.9, slowCarbs: 56, fastCarbs: 4 },
      { name: '–¢–æ—Ñ—É', icon: 'üßà', cal: 76, protein: 8, fat: 4.8, carbs: 1.9, animP: 0, plantP: 8, satFat: 0.7, wordsunFat: 4.1, slowCarbs: 1, fastCarbs: 0.9 },
      { name: '–ö–∞–≤–∞', icon: '‚òï', cal: 2, protein: 0.1, fat: 0, carbs: 0.3, animP: 0, plantP: 0.1, satFat: 0, wordsunFat: 0, slowCarbs: 0, fastCarbs: 0.3, countable: true, avgWeight: 200 },
    ];

    const getDateStr = (d) => d.toISOString().split('T')[0];
    const formatDate = (d) => d.toLocaleDateString('uk-UA', { weekday: 'short', day: 'numeric', month: 'short' });
    const storage = { get: (k) => { try { return JSON.parse(localStorage.getItem(k)); } catch { return null; } }, set: (k, v) => localStorage.setItem(k, JSON.stringify(v)) };

    const MacroRings = ({ protein, fat, carbs, goals }) => {
      const pProg = Math.min(goals.protein > 0 ? (protein / goals.protein) * 100 : 0, 100);
      const fProg = Math.min(goals.fat > 0 ? (fat / goals.fat) * 100 : 0, 100);
      const cProg = Math.min(goals.carbs > 0 ? (carbs / goals.carbs) * 100 : 0, 100);
      const size = 130, center = size / 2, sw = 12, gap = 3;
      const outerR = center - sw / 2 - 2, middleR = outerR - sw - gap, innerR = middleR - sw - gap;
      const arc = (r, p) => {
        if (p <= 0) return '';
        const a = (p / 100) * 360, rad = (a - 90) * (Math.PI / 180), la = a > 180 ? 1 : 0;
        if (p >= 100) return `M ${center} ${center - r} A ${r} ${r} 0 1 1 ${center - 0.001} ${center - r}`;
        return `M ${center} ${center - r} A ${r} ${r} 0 ${la} 1 ${center + r * Math.cos(rad)} ${center + r * Math.sin(rad)}`;
      };
      return (
        <div className="flex flex-col items-center">
          <svg width={size} height={size}>
            <circle cx={center} cy={center} r={outerR} fill="none" stroke="#3d1f2e" strokeWidth={sw} />
            <circle cx={center} cy={center} r={middleR} fill="none" stroke="#2e3d1f" strokeWidth={sw} />
            <circle cx={center} cy={center} r={innerR} fill="none" stroke="#1f2e3d" strokeWidth={sw} />
            {cProg > 0 && <path d={arc(outerR, cProg)} fill="none" stroke="#ff2d55" strokeWidth={sw} strokeLinecap="round" />}
            {fProg > 0 && <path d={arc(middleR, fProg)} fill="none" stroke="#adff2f" strokeWidth={sw} strokeLinecap="round" />}
            {pProg > 0 && <path d={arc(innerR, pProg)} fill="none" stroke="#00ffff" strokeWidth={sw} strokeLinecap="round" />}
          </svg>
          <div className="flex gap-3 mt-2 text-xs">
            <div className="flex items-center gap-1"><div className="w-2 h-2 rounded-full" style={{background:'#00ffff'}}/>–ë</div>
            <div className="flex items-center gap-1"><div className="w-2 h-2 rounded-full" style={{background:'#adff2f'}}/>–ñ</div>
            <div className="flex items-center gap-1"><div className="w-2 h-2 rounded-full" style={{background:'#ff2d55'}}/>–í</div>
          </div>
        </div>
      );
    };

    const Chart = ({ data, color, label, unit }) => {
      if (!data.length) return <p className="text-gray-500 text-center py-4 text-sm">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</p>;
      const values = data.map(d => d.value).filter(v => v > 0);
      const max = Math.max(...values) || 1;
      const min = values.length ? Math.min(...values) : 0;
      const chartHeight = 100;
      const barWidth = data.length > 14 ? 20 : data.length > 7 ? 30 : 40;
      
      return (
        <div>
          <div className="flex justify-between text-xs text-gray-400 mb-2">
            <span>{label}</span>
            <span>max: {max.toFixed(0)}{unit}</span>
          </div>
          <div className="overflow-x-auto pb-2">
            <div className="flex items-end gap-1" style={{ height: chartHeight, minWidth: data.length * (barWidth + 4) }}>
              {data.map((d, i) => {
                const h = d.value > 0 ? Math.max(((d.value - min * 0.9) / (max - min * 0.9)) * chartHeight, 8) : 0;
                return (
                  <div key={i} className="flex flex-col items-center" style={{ width: barWidth, minWidth: barWidth }}>
                    <div className="w-full rounded-t transition-all" style={{ height: h, background: color }} />
                  </div>
                );
              })}
            </div>
            <div className="flex gap-1 mt-1" style={{ minWidth: data.length * (barWidth + 4) }}>
              {data.map((d, i) => (
                <div key={i} className="text-center" style={{ width: barWidth, minWidth: barWidth }}>
                  <span className="text-xs text-gray-500">{d.label}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    };

    const Alert = ({ type, message, onClose }) => (
      <div className={`alert ${type === 'warning' ? 'bg-yellow-600' : 'bg-red-600'} text-white`}>
        <div className="flex justify-between items-start">
          <div><span className="text-xl mr-2">{type === 'warning' ? '‚ö†Ô∏è' : 'üõë'}</span>{message}</div>
          <button onClick={onClose} className="text-xl ml-2">√ó</button>
        </div>
      </div>
    );

    function App() {
      const [tab, setTab] = useState('food');
      const [meals, setMeals] = useState([]);
      const [weights, setWeights] = useState([]);
      const [customFoods, setCustomFoods] = useState([]);
      const [showForm, setShowForm] = useState(false);
      const [showSettings, setShowSettings] = useState(false);
      const [showAddFood, setShowAddFood] = useState(false);
      const [showDetails, setShowDetails] = useState(false);
      const [showMealDetail, setShowMealDetail] = useState(null);
      const [editMeal, setEditMeal] = useState(null);
      const [selectedFood, setSelectedFood] = useState('');
      const [grams, setGrams] = useState('100');
      const [quantity, setQuantity] = useState('1');
      const [inputMode, setInputMode] = useState('grams');
      const [mealType, setMealType] = useState('breakfast');
      const [weight, setWeight] = useState('');
      const [currentDate, setCurrentDate] = useState(new Date());
      const [goals, setGoals] = useState({ calories: 2400, protein: 160, fat: 80, carbs: 220 });
      const [tempGoals, setTempGoals] = useState(goals);
      const [newFood, setNewFood] = useState({ name: '', cal: '', protein: '', fat: '', carbs: '', animP: '', plantP: '', satFat: '', wordsunFat: '', slowCarbs: '', fastCarbs: '', icon: 'üçΩÔ∏è' });
      const [alerts, setAlerts] = useState([]);
      const [chartPeriod, setChartPeriod] = useState('week');

      const today = getDateStr(currentDate);
      const allFoods = [...defaultFoods, ...customFoods].sort((a, b) => a.name.localeCompare(b.name, 'uk'));
      const selectedFoodData = allFoods.find(f => f.name === selectedFood);

      useEffect(() => {
        setMeals(storage.get(`meals:${today}`) || []);
        setWeights(storage.get('weights') || []);
        setCustomFoods(storage.get('customFoods') || []);
        const g = storage.get('goals');
        if (g) { setGoals(g); setTempGoals(g); }
      }, [today]);

      useEffect(() => {
        const hour = new Date().getHours();
        const todayMeals = storage.get(`meals:${getDateStr(new Date())}`) || [];
        const tP = todayMeals.reduce((s, m) => s + (m.protein || 0), 0);
        const tF = todayMeals.reduce((s, m) => s + (m.fat || 0), 0);
        const tC = todayMeals.reduce((s, m) => s + (m.carbs || 0), 0);
        const g = storage.get('goals') || goals;
        const newAlerts = [];
        if (hour >= 21 && tP < g.protein) newAlerts.push({ type: 'warning', message: `–í–µ—á—ñ—Ä! –ù–µ –¥–æ–±—Ä–∞–≤ –±—ñ–ª–∫–∞: ${tP.toFixed(0)}–≥ –∑ ${g.protein}–≥` });
        if (tF >= g.fat && tC >= g.carbs) newAlerts.push({ type: 'limit', message: `–õ—ñ–º—ñ—Ç –∂–∏—Ä—ñ–≤ —ñ –≤—É–≥–ª–µ–≤–æ–¥—ñ–≤ –≤–∏—á–µ—Ä–ø–∞–Ω–æ!` });
        setAlerts(newAlerts);
      }, []);

      useEffect(() => {
        if (selectedFoodData?.countable) {
          setInputMode('quantity');
          setGrams(String(selectedFoodData.avgWeight));
        } else {
          setInputMode('grams');
        }
      }, [selectedFood]);

      const getChartData = (type) => {
        const periods = { day: 1, week: 7, month: 30, year: 365 };
        const days = periods[chartPeriod];
        const data = [];
        for (let i = days - 1; i >= 0; i--) {
          const d = new Date(); d.setDate(d.getDate() - i);
          const ds = getDateStr(d);
          if (type === 'weight') {
            const w = weights.find(x => x.date === ds);
            data.push({ label: chartPeriod === 'day' ? '–°—å–æ–≥–æ–¥–Ω—ñ' : d.getDate(), value: w?.weight || 0 });
          } else {
            const m = storage.get(`meals:${ds}`) || [];
            data.push({ label: chartPeriod === 'day' ? '–°—å–æ–≥–æ–¥–Ω—ñ' : d.getDate(), value: m.reduce((s, x) => s + x.calories, 0) });
          }
        }
        return data;
      };

      const saveMeals = (m) => { setMeals(m); storage.set(`meals:${today}`, m); };
      
      const calcMealData = (food, g) => {
        const mult = g / 100;
        return {
          calories: Math.round(food.cal * mult),
          protein: Math.round(food.protein * mult * 10) / 10,
          fat: Math.round(food.fat * mult * 10) / 10,
          carbs: Math.round(food.carbs * mult * 10) / 10,
          animP: Math.round((food.animP || 0) * mult * 10) / 10,
          plantP: Math.round((food.plantP || 0) * mult * 10) / 10,
          satFat: Math.round((food.satFat || 0) * mult * 10) / 10,
          wordsunFat: Math.round((food.wordsunFat || 0) * mult * 10) / 10,
          slowCarbs: Math.round((food.slowCarbs || 0) * mult * 10) / 10,
          fastCarbs: Math.round((food.fastCarbs || 0) * mult * 10) / 10,
        };
      };

      const addMeal = () => {
        if (!selectedFood) return;
        const food = allFoods.find(f => f.name === selectedFood);
        if (!food) return;
        const finalGrams = inputMode === 'quantity' ? (parseFloat(quantity) || 1) * (food.avgWeight || 100) : (parseFloat(grams) || 100);
        const data = calcMealData(food, finalGrams);
        const m = { id: Date.now(), name: food.name, icon: food.icon || 'üçΩÔ∏è', grams: finalGrams, type: mealType, ...data };
        saveMeals([...meals, m]);
        setSelectedFood(''); setGrams('100'); setQuantity('1'); setShowForm(false);
      };

      const updateMeal = () => {
        if (!editMeal) return;
        const food = allFoods.find(f => f.name === editMeal.name);
        const data = food ? calcMealData(food, editMeal.grams) : {};
        const updated = meals.map(m => m.id === editMeal.id ? { ...editMeal, ...data } : m);
        saveMeals(updated);
        setEditMeal(null); setShowMealDetail(null);
      };
      
      const deleteMeal = (id) => { saveMeals(meals.filter(m => m.id !== id)); setShowMealDetail(null); };
      const addWeight = () => { if (!weight) return; const w = [...weights.filter(x => x.date !== today), { date: today, weight: parseFloat(weight) }].sort((a, b) => a.date.localeCompare(b.date)); setWeights(w); storage.set('weights', w); setWeight(''); };
      const updateGoals = () => { setGoals(tempGoals); storage.set('goals', tempGoals); setShowSettings(false); };
      const changeDate = (d) => { const n = new Date(currentDate); n.setDate(n.getDate() + d); if (n <= new Date()) setCurrentDate(n); };
      
      const addCustomFood = () => {
        if (!newFood.name || !newFood.cal) return;
        const f = { name: newFood.name, icon: newFood.icon || 'üçΩÔ∏è', cal: +newFood.cal || 0, protein: +newFood.protein || 0, fat: +newFood.fat || 0, carbs: +newFood.carbs || 0, animP: +newFood.animP || 0, plantP: +newFood.plantP || 0, satFat: +newFood.satFat || 0, wordsunFat: +newFood.wordsunFat || 0, slowCarbs: +newFood.slowCarbs || 0, fastCarbs: +newFood.fastCarbs || 0 };
        const upd = [...customFoods, f]; setCustomFoods(upd); storage.set('customFoods', upd);
        setNewFood({ name: '', cal: '', protein: '', fat: '', carbs: '', animP: '', plantP: '', satFat: '', wordsunFat: '', slowCarbs: '', fastCarbs: '', icon: 'üçΩÔ∏è' }); setShowAddFood(false);
      };

      const totals = meals.reduce((acc, m) => ({
        cal: acc.cal + m.calories, p: acc.p + m.protein, f: acc.f + m.fat, c: acc.c + m.carbs,
        animP: acc.animP + (m.animP || 0), plantP: acc.plantP + (m.plantP || 0),
        satFat: acc.satFat + (m.satFat || 0), wordsunFat: acc.wordsunFat + (m.wordsunFat || 0),
        slowCarbs: acc.slowCarbs + (m.slowCarbs || 0), fastCarbs: acc.fastCarbs + (m.fastCarbs || 0)
      }), { cal: 0, p: 0, f: 0, c: 0, animP: 0, plantP: 0, satFat: 0, wordsunFat: 0, slowCarbs: 0, fastCarbs: 0 });

      return (
        <div className="min-h-screen bg-black text-white pb-20">
          {alerts.map((a, i) => <Alert key={i} {...a} onClose={() => setAlerts(alerts.filter((_, j) => j !== i))} />)}
          
          <div className="max-w-md mx-auto p-4">
            <div className="flex items-center justify-between mb-4">
              <button onClick={() => changeDate(-1)} className="p-2 text-2xl">‚Äπ</button>
              <div className="text-center">
                <h1 className="font-bold flex items-center gap-2 justify-center">üç¥ Food Tracker <button onClick={() => setShowSettings(true)} className="text-gray-400 text-sm">‚öôÔ∏è</button></h1>
                <p className="text-gray-400 text-sm">{formatDate(currentDate)}</p>
              </div>
              <button onClick={() => changeDate(1)} className="p-2 text-2xl" disabled={today === getDateStr(new Date())}>‚Ä∫</button>
            </div>

            {/* Settings Modal */}
            {showSettings && (
              <div className="fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4">
                <div className="bg-gray-900 rounded-2xl p-5 w-full max-w-sm border border-gray-700 max-h-[90vh] overflow-y-auto">
                  <div className="flex justify-between mb-4"><h3 className="font-bold">–¶—ñ–ª—ñ</h3><button onClick={() => setShowSettings(false)}>‚úï</button></div>
                  <div className="space-y-3">
                    {[['calories', '–ö–∞–ª–æ—Ä—ñ—ó', 'orange'], ['protein', '–ë—ñ–ª–∫–∏', '#00ffff'], ['fat', '–ñ–∏—Ä–∏', '#adff2f'], ['carbs', '–í—É–≥–ª–µ–≤–æ–¥–∏', '#ff2d55']].map(([k, l, c]) => (
                      <div key={k}><label className="text-sm" style={{color: c}}>{l}</label><input type="number" value={tempGoals[k]} onChange={(e) => setTempGoals({ ...tempGoals, [k]: +e.target.value })} className="w-full bg-gray-800 rounded-xl px-4 py-2 mt-1" /></div>
                    ))}
                  </div>
                  <button onClick={updateGoals} className="w-full bg-emerald-500 py-3 rounded-xl mt-4 font-semibold">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                </div>
              </div>
            )}

            {/* Add Custom Food Modal */}
            {showAddFood && (
              <div className="fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4">
                <div className="bg-gray-900 rounded-2xl p-5 w-full max-w-sm border border-gray-700 max-h-[90vh] overflow-y-auto">
                  <div className="flex justify-between mb-4"><h3 className="font-bold">–ù–æ–≤–∏–π –ø—Ä–æ–¥—É–∫—Ç</h3><button onClick={() => setShowAddFood(false)}>‚úï</button></div>
                  <div className="space-y-3">
                    <div className="flex gap-2">
                      <input placeholder="–Ü–∫–æ–Ω–∫–∞" value={newFood.icon} onChange={(e) => setNewFood({...newFood, icon: e.target.value})} className="w-16 bg-gray-800 rounded-xl px-3 py-2 text-center text-2xl" />
                      <input placeholder="–ù–∞–∑–≤–∞" value={newFood.name} onChange={(e) => setNewFood({...newFood, name: e.target.value})} className="flex-1 bg-gray-800 rounded-xl px-4 py-2" />
                    </div>
                    <input type="number" placeholder="–ö–∫–∞–ª/100–≥" value={newFood.cal} onChange={(e) => setNewFood({...newFood, cal: e.target.value})} className="w-full bg-gray-800 rounded-xl px-4 py-2" />
                    <p className="text-xs text-gray-500">–ë—ñ–ª–æ–∫:</p>
                    <div className="grid grid-cols-2 gap-2">
                      <input type="number" placeholder="–¢–≤–∞—Ä–∏–Ω–Ω–∏–π" value={newFood.animP} onChange={(e) => setNewFood({...newFood, animP: e.target.value, protein: (+e.target.value || 0) + (+newFood.plantP || 0)})} className="bg-gray-800 rounded-xl px-3 py-2 text-sm" />
                      <input type="number" placeholder="–†–æ—Å–ª–∏–Ω–Ω–∏–π" value={newFood.plantP} onChange={(e) => setNewFood({...newFood, plantP: e.target.value, protein: (+newFood.animP || 0) + (+e.target.value || 0)})} className="bg-gray-800 rounded-xl px-3 py-2 text-sm" />
                    </div>
                    <p className="text-xs text-gray-500">–ñ–∏—Ä–∏:</p>
                    <div className="grid grid-cols-2 gap-2">
                      <input type="number" placeholder="–ù–∞—Å–∏—á–µ–Ω—ñ" value={newFood.satFat} onChange={(e) => setNewFood({...newFood, satFat: e.target.value, fat: (+e.target.value || 0) + (+newFood.wordsunFat || 0)})} className="bg-gray-800 rounded-xl px-3 py-2 text-sm" />
                      <input type="number" placeholder="–ù–µ–Ω–∞—Å–∏—á–µ–Ω—ñ" value={newFood.wordsunFat} onChange={(e) => setNewFood({...newFood, wordsunFat: e.target.value, fat: (+newFood.satFat || 0) + (+e.target.value || 0)})} className="bg-gray-800 rounded-xl px-3 py-2 text-sm" />
                    </div>
                    <p className="text-xs text-gray-500">–í—É–≥–ª–µ–≤–æ–¥–∏:</p>
                    <div className="grid grid-cols-2 gap-2">
                      <input type="number" placeholder="–ü–æ–≤—ñ–ª—å–Ω—ñ" value={newFood.slowCarbs} onChange={(e) => setNewFood({...newFood, slowCarbs: e.target.value, carbs: (+e.target.value || 0) + (+newFood.fastCarbs || 0)})} className="bg-gray-800 rounded-xl px-3 py-2 text-sm" />
                      <input type="number" placeholder="–®–≤–∏–¥–∫—ñ" value={newFood.fastCarbs} onChange={(e) => setNewFood({...newFood, fastCarbs: e.target.value, carbs: (+newFood.slowCarbs || 0) + (+e.target.value || 0)})} className="bg-gray-800 rounded-xl px-3 py-2 text-sm" />
                    </div>
                  </div>
                  <button onClick={addCustomFood} className="w-full bg-emerald-500 py-3 rounded-xl mt-4 font-semibold">–î–æ–¥–∞—Ç–∏</button>
                </div>
              </div>
            )}

            {/* Meal Detail Modal */}
            {showMealDetail && (
              <div className="fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4">
                <div className="bg-gray-900 rounded-2xl p-5 w-full max-w-sm border border-gray-700">
                  <div className="flex justify-between items-center mb-4">
                    <h3 className="font-bold text-lg flex items-center gap-2"><span className="text-2xl">{showMealDetail.icon}</span>{showMealDetail.name}</h3>
                    <button onClick={() => { setShowMealDetail(null); setEditMeal(null); }}>‚úï</button>
                  </div>
                  {editMeal ? (
                    <div className="space-y-3">
                      <div><label className="text-sm text-gray-400">–ì—Ä–∞–º–∏</label><input type="number" value={editMeal.grams} onChange={(e) => setEditMeal({...editMeal, grams: +e.target.value})} className="w-full bg-gray-800 rounded-xl px-4 py-2 mt-1" /></div>
                      <div className="flex gap-2">
                        <button onClick={() => setEditMeal(null)} className="flex-1 bg-gray-800 py-2 rounded-xl">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                        <button onClick={updateMeal} className="flex-1 bg-emerald-500 py-2 rounded-xl font-semibold">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                      </div>
                    </div>
                  ) : (
                    <>
                      <div className="space-y-2 text-sm">
                        <p className="text-gray-400">–í–∞–≥–∞: <span className="text-white">{showMealDetail.grams}–≥</span></p>
                        <p className="text-gray-400">–ö–∞–ª–æ—Ä—ñ—ó: <span className="text-white">{showMealDetail.calories} –∫–∫–∞–ª</span></p>
                        <hr className="border-gray-800 my-2" />
                        <p style={{color:'#00ffff'}}>–ë—ñ–ª–æ–∫: {showMealDetail.protein}–≥ <span className="text-gray-500">(—Ç–≤–∞—Ä: {showMealDetail.animP || 0}–≥, —Ä–æ—Å–ª: {showMealDetail.plantP || 0}–≥)</span></p>
                        <p style={{color:'#adff2f'}}>–ñ–∏—Ä–∏: {showMealDetail.fat}–≥ <span className="text-gray-500">(–Ω–∞—Å–∏—á: {showMealDetail.satFat || 0}–≥, –Ω–µ–Ω–∞—Å–∏—á: {showMealDetail.wordsunFat || 0}–≥)</span></p>
                        <p style={{color:'#ff2d55'}}>–í—É–≥–ª–µ–≤: {showMealDetail.carbs}–≥ <span className="text-gray-500">(–ø–æ–≤—ñ–ª—å–Ω: {showMealDetail.slowCarbs || 0}–≥, —à–≤–∏–¥–∫: {showMealDetail.fastCarbs || 0}–≥)</span></p>
                      </div>
                      <div className="flex gap-2 mt-4">
                        <button onClick={() => setEditMeal(showMealDetail)} className="flex-1 bg-gray-800 py-2 rounded-xl">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
                        <button onClick={() => deleteMeal(showMealDetail.id)} className="flex-1 bg-red-600 py-2 rounded-xl">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
                      </div>
                    </>
                  )}
                </div>
              </div>
            )}

            {/* Tabs */}
            <div className="flex gap-2 mb-4">
              {[['food', 'üç¥ –á–∂–∞'], ['weight', '‚öñÔ∏è –í–∞–≥–∞'], ['charts', 'üìä –ì—Ä–∞—Ñ—ñ–∫–∏']].map(([t, l]) => (
                <button key={t} onClick={() => setTab(t)} className={`flex-1 py-2 rounded-xl text-sm ${tab === t ? 'bg-emerald-500' : 'bg-gray-800'}`}>{l}</button>
              ))}
            </div>

            {/* Food Tab */}
            {tab === 'food' && (
              <>
                <div className="bg-gray-900 rounded-2xl p-4 mb-4 border border-gray-800">
                  <div className="flex items-center gap-4">
                    <MacroRings protein={totals.p} fat={totals.f} carbs={totals.c} goals={goals} />
                    <div className="flex-1 space-y-2">
                      <div>
                        <div className="flex justify-between text-sm mb-1"><span>üî• –ö–∫–∞–ª</span><span><b>{totals.cal}</b>/{goals.calories}</span></div>
                        <div className="h-2 bg-gray-800 rounded-full overflow-hidden"><div className="h-full bg-orange-500" style={{ width: `${Math.min(totals.cal / goals.calories * 100, 100)}%` }} /></div>
                      </div>
                      <div className="flex justify-between text-xs"><span style={{color:'#00ffff'}}>–ë: {totals.p.toFixed(0)}–≥</span><span className="text-gray-500">/{goals.protein}–≥</span></div>
                      <div className="flex justify-between text-xs"><span style={{color:'#adff2f'}}>–ñ: {totals.f.toFixed(0)}–≥</span><span className="text-gray-500">/{goals.fat}–≥</span></div>
                      <div className="flex justify-between text-xs"><span style={{color:'#ff2d55'}}>–í: {totals.c.toFixed(0)}–≥</span><span className="text-gray-500">/{goals.carbs}–≥</span></div>
                    </div>
                  </div>
                  <button onClick={() => setShowDetails(!showDetails)} className="w-full text-center text-gray-400 text-xs mt-3 py-1">{showDetails ? '‚ñ≤ –°—Ö–æ–≤–∞—Ç–∏' : '‚ñº –î–µ—Ç–∞–ª—ñ'}</button>
                  {showDetails && (
                    <div className="mt-3 pt-3 border-t border-gray-800 grid grid-cols-2 gap-2 text-xs">
                      <div><span className="text-gray-400">–ë —Ç–≤–∞—Ä–∏–Ω:</span> {totals.animP.toFixed(1)}–≥</div>
                      <div><span className="text-gray-400">–ë —Ä–æ—Å–ª–∏–Ω:</span> {totals.plantP.toFixed(1)}–≥</div>
                      <div><span className="text-gray-400">–ñ –Ω–∞—Å–∏—á:</span> {totals.satFat.toFixed(1)}–≥</div>
                      <div><span className="text-gray-400">–ñ –Ω–µ–Ω–∞—Å–∏—á:</span> {totals.wordsunFat.toFixed(1)}–≥</div>
                      <div><span className="text-gray-400">–í –ø–æ–≤—ñ–ª—å–Ω:</span> {totals.slowCarbs.toFixed(1)}–≥</div>
                      <div><span className="text-gray-400">–í —à–≤–∏–¥–∫:</span> {totals.fastCarbs.toFixed(1)}–≥</div>
                    </div>
                  )}
                </div>

                {!showForm ? (
                  <div className="flex gap-2 mb-4">
                    <button onClick={() => setShowAddFood(true)} className="flex-1 bg-gray-800 py-3 rounded-xl text-sm">‚ûï –°–≤—ñ–π</button>
                    <button onClick={() => setShowForm(true)} className="flex-1 bg-emerald-500 py-3 rounded-xl">‚ûï –î–æ–¥–∞—Ç–∏</button>
                  </div>
                ) : (
                  <div className="bg-gray-900 rounded-2xl p-4 mb-4 border border-gray-800">
                    <select value={selectedFood} onChange={(e) => setSelectedFood(e.target.value)} className="w-full bg-gray-800 rounded-xl px-4 py-3 mb-3">
                      <option value="">–û–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–¥—É–∫—Ç...</option>
                      {allFoods.map((f, i) => <option key={i} value={f.name}>{f.icon} {f.name} ‚Äî {f.cal} –∫–∫–∞–ª</option>)}
                    </select>
                    {selectedFood && (
                      <>
                        <p className="text-sm text-gray-400 mb-3">–ë:{selectedFoodData?.protein}–≥ –ñ:{selectedFoodData?.fat}–≥ –í:{selectedFoodData?.carbs}–≥</p>
                        {selectedFoodData?.countable ? (
                          <div className="flex gap-2 mb-3">
                            <button onClick={() => setInputMode('quantity')} className={`flex-1 py-2 rounded-xl text-sm ${inputMode === 'quantity' ? 'bg-emerald-500' : 'bg-gray-800'}`}>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</button>
                            <button onClick={() => setInputMode('grams')} className={`flex-1 py-2 rounded-xl text-sm ${inputMode === 'grams' ? 'bg-emerald-500' : 'bg-gray-800'}`}>–ì—Ä–∞–º–∏</button>
                          </div>
                        ) : null}
                        {inputMode === 'quantity' && selectedFoodData?.countable ? (
                          <div className="mb-3">
                            <label className="text-xs text-gray-400">–ö—ñ–ª—å–∫—ñ—Å—Ç—å (1 —à—Ç ‚âà {selectedFoodData.avgWeight}–≥)</label>
                            <input type="number" value={quantity} onChange={(e) => setQuantity(e.target.value)} className="w-full bg-gray-800 rounded-xl px-4 py-2 mt-1" />
                          </div>
                        ) : (
                          <input type="number" value={grams} onChange={(e) => setGrams(e.target.value)} placeholder="–ì—Ä–∞–º—ñ–≤" className="w-full bg-gray-800 rounded-xl px-4 py-2 mb-3" />
                        )}
                      </>
                    )}
                    <div className="grid grid-cols-4 gap-2 mb-3">
                      {Object.entries(mealNames).map(([k, v]) => (
                        <button key={k} onClick={() => setMealType(k)} className={`p-2 rounded-xl text-xs ${mealType === k ? 'bg-emerald-500' : 'bg-gray-800'}`}>{mealIcons[k]} {v}</button>
                      ))}
                    </div>
                    <div className="flex gap-2">
                      <button onClick={() => { setShowForm(false); setSelectedFood(''); }} className="flex-1 bg-gray-800 py-2 rounded-xl">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                      <button onClick={addMeal} className="flex-1 bg-emerald-500 py-2 rounded-xl font-semibold">–î–æ–¥–∞—Ç–∏</button>
                    </div>
                  </div>
                )}

                <div className="space-y-2">
                  {meals.map(m => (
                    <div key={m.id} onClick={() => setShowMealDetail(m)} className="bg-gray-900 rounded-xl p-3 flex items-center gap-3 border border-gray-800 cursor-pointer active:bg-gray-800">
                      <span className="text-2xl">{m.icon || mealIcons[m.type]}</span>
                      <div className="flex-1">
                        <p className="font-medium text-sm">{m.name} ({m.grams}–≥)</p>
                        <p className="text-xs text-gray-400">–ë:{m.protein}–≥ –ñ:{m.fat}–≥ –í:{m.carbs}–≥</p>
                      </div>
                      <div className="text-right"><p className="font-bold text-emerald-400">{m.calories}</p><p className="text-xs text-gray-400">–∫–∫–∞–ª</p></div>
                    </div>
                  ))}
                </div>
              </>
            )}

            {/* Weight Tab */}
            {tab === 'weight' && (
              <div className="space-y-4">
                <div className="bg-gray-900 rounded-2xl p-4 border border-gray-800">
                  <h3 className="font-semibold mb-3">‚öñÔ∏è –ó–∞–ø–∏—Å–∞—Ç–∏ –≤–∞–≥—É</h3>
                  <div className="flex gap-2">
                    <input type="number" step="0.1" placeholder="–í–∞–≥–∞ (–∫–≥)" value={weight} onChange={(e) => setWeight(e.target.value)} className="flex-1 bg-gray-800 rounded-xl px-4 py-3" />
                    <button onClick={addWeight} className="bg-emerald-500 px-6 rounded-xl font-semibold">+</button>
                  </div>
                </div>
                <div className="bg-gray-900 rounded-2xl p-4 border border-gray-800">
                  <h3 className="font-semibold mb-3">–Ü—Å—Ç–æ—Ä—ñ—è</h3>
                  {weights.length === 0 ? <p className="text-gray-500 text-center py-4">–ù–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤</p> : (
                    <div className="space-y-2 max-h-64 overflow-y-auto">{[...weights].reverse().map((w, i) => (
                      <div key={i} className="flex justify-between bg-gray-800 rounded-lg p-3">
                        <span className="text-gray-400">{new Date(w.date).toLocaleDateString('uk-UA')}</span>
                        <span className="font-bold">{w.weight} –∫–≥</span>
                      </div>
                    ))}</div>
                  )}
                </div>
              </div>
            )}

            {/* Charts Tab */}
            {tab === 'charts' && (
              <div className="space-y-4">
                <div className="flex gap-2">
                  {['day', 'week', 'month', 'year'].map(p => (
                    <button key={p} onClick={() => setChartPeriod(p)} className={`flex-1 py-2 rounded-xl text-xs ${chartPeriod === p ? 'bg-emerald-500' : 'bg-gray-800'}`}>
                      {p === 'day' ? '–î–µ–Ω—å' : p === 'week' ? '–¢–∏–∂–¥–µ–Ω—å' : p === 'month' ? '–ú—ñ—Å—è—Ü—å' : '–†—ñ–∫'}
                    </button>
                  ))}
                </div>
                <div className="bg-gray-900 rounded-2xl p-4 border border-gray-800">
                  <Chart data={getChartData('calories')} color="#f97316" label="üî• –ö–∞–ª–æ—Ä—ñ—ó" unit=" –∫–∫–∞–ª" />
                </div>
                <div className="bg-gray-900 rounded-2xl p-4 border border-gray-800">
                  <Chart data={getChartData('weight')} color="#10b981" label="‚öñÔ∏è –í–∞–≥–∞" unit=" –∫–≥" />
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
